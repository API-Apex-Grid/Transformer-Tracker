datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String   @id @default(cuid())
  username     String   @unique
  passwordHash String
  createdAt    DateTime @default(now())
}

model Transformer {
  id                    String  @id @default(cuid())
  region                String
  transformerNumber     String  @unique
  poleNumber            String
  type                  String
  location              String
  sunnyImage            String?
  cloudyImage           String?
  windyImage            String?
  uploadedBy            String?
  sunnyImageUploadedBy  String?
  cloudyImageUploadedBy String?
  windyImageUploadedBy  String?
  favourite             Boolean @default(false)

  inspections Inspection[]

  @@unique([transformerNumber, poleNumber])
}

model Inspection {
  id                String      @id @default(cuid())
  transformerNumber String
  transformer       Transformer @relation(fields: [transformerNumber], references: [transformerNumber])
  inspectionNumber  String      @unique
  inspectedDate     String
  maintainanceDate  String
  branch            String
  status            String
  imageUrl          String?
  weather           String?
  uploadedBy        String?
  imageUploadedBy   String?
  favourite         Boolean @default(false)
}
